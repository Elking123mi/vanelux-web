[build]
  command = """
    rm -rf flutter && \
    git clone https://github.com/flutter/flutter.git -b stable --depth 1 && \
    export PATH="$PATH:`pwd`/flutter/bin" && \
    flutter config --enable-web && \
    flutter pub get && \
    flutter build web --release --dart-define=GOOGLE_MAPS_API_KEY=$GOOGLE_MAPS_API_KEY
  """
  publish = "build/web"
  functions = "netlify/functions"

[build.environment]
  FLUTTER_VERSION = "stable"
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"

# Redirect /api/chat to the Netlify Function
[[redirects]]
  from = "/api/chat"
  to = "/.netlify/functions/chat"
  status = 200
  force = true
